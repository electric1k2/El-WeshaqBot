Telegram Bot UI Prompt (aiogram v3) / Ø¨Ø±ÙˆÙ…Øª ÙˆØ§Ø¬Ù‡Ø© Ù…Ø³ØªØ®Ø¯Ù… Ø¨ÙˆØª ØªÙŠÙ„ÙŠØ¬Ø±Ø§Ù… (aiogram v3)

English Version

Main Menu

Construct an InlineKeyboardMarkup for the main menu containing the buttons:
ğŸ“‚ Services, â„¹ï¸ Help, ğŸ Free Points, âš™ï¸ Settings, ğŸ“Š My Statistics, and ğŸ›  Admin Panel (the Admin button is added only if the user is an admin). Assign callback_data for each button (e.g. "main:services", "main:help", etc.).

Use a filter or check (for example, compare message.from_user.id to your admin ID or use a custom admin filter) to determine if the user is an admin. Only include the â€œAdmin Panelâ€ button for admins.

Provide handler functions for each main menu button using aiogram decorators (e.g. @router.callback_query(F.data == "main:services") or similar). These handlers will display the corresponding submenu or perform the action for that button.


Services Section (ğŸ“‚ Services)

When the user clicks Services (ğŸ“‚), show a new inline keyboard with two buttons:

ğŸ“± Numbers (callback_data="services_numbers") â€“ starts the phone-number booking flow.

ğŸ“§ Temporary Gmail (callback_data="services_gmail") â€“ responds with "Coming soon âœ¨".


Implement a callback handler for "services_numbers" that begins the number-booking process. Use a Finite State Machine (FSM) to handle the multi-step flow (for example: selecting service type, choosing country, confirming booking). Define a StatesGroup like:

class NumberBooking(StatesGroup):
    waiting_for_service = State()
    waiting_for_country = State()
    # Add more states as needed (e.g. confirmation)

Set the first state (e.g. waiting_for_service) after the user clicks "Numbers". In each state, create appropriate inline keyboards for the user to make choices, and transition to the next state using await state.set_state(...).

For the Temporary Gmail button, simply reply with the message "Coming soon âœ¨". For example:

@router.callback_query(F.data == "services_gmail")
async def temp_gmail(callback: CallbackQuery):
    await callback.message.answer("Coming soon âœ¨")
    await callback.answer()


Settings Section (âš™ï¸ Settings)

Under Settings (âš™ï¸), include a button "Balance & History (ğŸ’°)" with callback_data="settings_balance".

When clicked, fetch the userâ€™s current balance and recent transactions from your database (for example, from the transactions table). Then send a formatted message showing the balance and a list (or table) of recent transactions.

Example handler outline:

@router.callback_query(F.data == "settings_balance")
async def show_balance(callback: CallbackQuery):
    balance = get_user_balance(user_id)        # Implement this function to query your DB
    transactions = get_recent_transactions(user_id)  # Query the 'transactions' table
    text = f"Your balance: {balance}\nRecent transactions:\n..."
    await callback.message.answer(text)
    await callback.answer()

Make sure to query the database correctly (using your ORM or SQL) and display the results clearly.


My Statistics Section (ğŸ“Š My Statistics)

When the user clicks My Statistics (ğŸ“Š), display a message containing:

The userâ€™s current balance.

The number of booked numbers by the user.

The date of the last bonus or reward the user received.

The date the user joined the service (account creation or first command).


Retrieve all this information from the userâ€™s record in your database. Send it as a neatly formatted text message, for example:

Balance: X points
Booked numbers: Y
Last bonus: YYYY-MM-DD
Joined: YYYY-MM-DD


Free Points Section (ğŸ Free Points)

Under Free Points (ğŸ), display the list of your botâ€™s channels (e.g., as bullet points or links) and include a "âœ… Verify" button with callback_data="free_verify".

When the user clicks Verify (âœ…), handle it by checking whether the user is subscribed to each channel (use await bot.get_chat_member(channel_id, user_id) or similar checks). If the user is subscribed to all required channels, grant points (e.g., update their balance in the database) and notify them of success. Otherwise, inform them which subscriptions are missing.

Example handler:

@router.callback_query(F.data == "free_verify")
async def verify_channels(callback: CallbackQuery):
    # Pseudo-code: check each channel
    all_subscribed = True
    for channel_id in channel_list:
        member = await bot.get_chat_member(channel_id, callback.from_user.id)
        if member.status == "left":
            all_subscribed = False
            break
    if all_subscribed:
        add_points_to_user(callback.from_user.id)  # Your logic here
        await callback.answer("All subscriptions verified! Points have been added.", show_alert=True)
    else:
        await callback.answer("Please subscribe to all channels to get points.", show_alert=True)


General Implementation Notes

Use aiogramâ€™s InlineKeyboardMarkup and InlineKeyboardButton to build inline keyboards. Ensure each button has a unique and descriptive callback_data.

Structure your callback_data consistently, for example using a "section:action" format (like "main:services", "settings:balance", etc.) to simplify handling.

Use aiogramâ€™s FSM (StatesGroup and State) to manage multi-step processes such as booking a number. For example, after the user clicks "Numbers", set the state to NumberBooking.waiting_for_service; when that step is done, move to NumberBooking.waiting_for_country, and so on.

Write separate handler functions for each callback/action. For inline buttons, use @router.callback_query(F.data == "..."); for simple text commands or reply buttons, use @router.message(F.text == "...").

Remember to call await callback.answer() in your callback handlers to remove the â€œloadingâ€ animation. (This is a good practice even if you immediately send another message.)

With the above structure and handlers in place, you will have a complete menu-driven interface. Fill in any database calls (for balances, transactions, booking, etc.) and business logic as needed. The code snippets and examples should be adjusted to your actual bot setup and database schema.


Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ø¹Ø±Ø¨ÙŠØ© Ù…Ù† Ø§Ù„Ø¨Ø±ÙˆÙ…Øª

Ø§Ù„ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©

Ø£Ù†Ø´Ø¦ Ù„ÙˆØ­Ø© Ù…ÙØ§ØªÙŠØ­ Ù…Ø¶Ù…Ù†Ø© Ù…Ù† Ù†ÙˆØ¹ InlineKeyboardMarkup ØªØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ Ø§Ù„Ø£Ø²Ø±Ø§Ø± Ø§Ù„ØªØ§Ù„ÙŠØ©:
ğŸ“‚ Ø®Ø¯Ù…Ø§ØªØŒ â„¹ï¸ Ù…Ø³Ø§Ø¹Ø¯Ø©ØŒ ğŸ Ù†Ù‚Ø§Ø· Ù…Ø¬Ø§Ù†ÙŠØ©ØŒ âš™ï¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§ØªØŒ ğŸ“Š Ø¥Ø­ØµØ§Ø¦ÙŠØªÙŠØŒ Ùˆ ğŸ›  Ù„ÙˆØ­Ø© Ø§Ù„Ø£Ø¯Ù…Ù† (ÙŠØ¸Ù‡Ø± ÙÙ‚Ø· Ø²Ø± Ø§Ù„Ø£Ø¯Ù…Ù† Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø£Ø¯Ù…Ù†). Ø­Ø¯Ù‘ÙØ¯ Ù‚ÙŠÙ…Ø© callback_data Ù„ÙƒÙ„ Ø²Ø± (Ù…Ø«Ù„Ù‹Ø§ "main:services"ØŒ "main:help"ØŒ ÙˆÙ‡ÙƒØ°Ø§).

ØªØ­Ù‚Ù‚ Ù…Ù† Ù‡ÙˆÙŠØ© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù„Ù…Ø¹Ø§Ø¯Ù„Ø© Ù‡ÙŠÙŠØ© Ø§Ù„Ø£Ø¯Ù…Ù† Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… ÙÙ„ØªØ± Ù…Ø®ØµØµ Ø£Ùˆ ØªØ­Ù‚Ù‚ Ø¨Ø±Ù…Ø¬ÙŠØ§Ù‹ (Ù…Ø«Ù„Ø§Ù‹ Ø¨Ù…Ù‚Ø§Ø±Ù†Ø© message.from_user.id Ù…Ø¹ Ø±Ù‚Ù… ØªØ¹Ø±ÙŠÙ Ø§Ù„Ø£Ø¯Ù…Ù†). Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø£Ø¯Ù…Ù†ØŒ Ø£Ø¶Ù Ø²Ø± Ù„ÙˆØ­Ø© Ø§Ù„Ø£Ø¯Ù…Ù†Ø› ÙˆØ¥Ù„Ø§ Ø§Ø³ØªØ¨Ø¹Ø§Ø¯Ù‡.

Ø£Ø¶Ù Ù…Ø¹Ø§Ù„Ø¬Ø§Øª (handlers) Ù„ÙƒÙ„ Ø²Ø± ÙÙŠ Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… @router.callback_query Ø£Ùˆ @router.message. Ø³ØªÙ‚ÙˆÙ… ÙƒÙ„ Ø¯Ø§Ù„Ø© Ù…Ø¹Ø§Ù„Ø¬Ø© Ø¨Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„ÙØ±Ø¹ÙŠØ© Ø§Ù„Ù…Ù†Ø§Ø³Ø¨Ø© Ø£Ùˆ ØªÙ†ÙÙŠØ° Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡ Ø§Ù„Ø®Ø§Øµ Ø¨Ø§Ù„Ø²Ø±.


Ù‚Ø³Ù… Ø§Ù„Ø®Ø¯Ù…Ø§Øª (ğŸ“‚ Ø®Ø¯Ù…Ø§Øª)

Ø¹Ù†Ø¯ Ø§Ù„Ù†Ù‚Ø± Ø¹Ù„Ù‰ Ø²Ø± Ø®Ø¯Ù…Ø§Øª (ğŸ“‚)ØŒ Ø§Ø¹Ø±Ø¶ Ù„ÙˆØ­Ø© Ù…ÙØ§ØªÙŠØ­ Ø¬Ø¯ÙŠØ¯Ø© Ø¨Ù‡Ø§ Ø²Ø±Ø§Ù†:

ğŸ“± Ø£Ø±Ù‚Ø§Ù… (callback_data="services_numbers") â€“ ÙŠØ¤Ø¯ÙŠ Ø¥Ù„Ù‰ Ø¨Ø¯Ø¡ Ø¹Ù…Ù„ÙŠØ© Ø­Ø¬Ø² Ø±Ù‚Ù… Ù‡Ø§ØªÙ.

ğŸ“§ Ø¬ÙŠÙ…ÙŠÙ„ Ù…Ø¤Ù‚Øª (callback_data="services_gmail") â€“ ÙŠØ±Ø¯ Ø¨Ø±Ø³Ø§Ù„Ø© "Ù‚Ø±ÙŠØ¨Ù‹Ø§ âœ¨" ÙÙ‚Ø·.


Ø¶Ø¹ Ù…Ø¹Ø§Ù„Ø¬Ø§Ù‹ Ù„Ù„ØªØ¹Ø§Ù…Ù„ Ù…Ø¹ callback_data="services_numbers". ÙÙŠ Ù‡Ø°Ø§ Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬ Ø§Ø¨Ø¯Ø£ ØªØ¯ÙÙ‚ Ø­Ø¬Ø² Ø§Ù„Ø±Ù‚Ù… Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… FSM. Ø£Ù†Ø´Ø¦ Ù…Ø¬Ù…ÙˆØ¹Ø© Ø­Ø§Ù„Ø§Øª StatesGroup Ù…Ø«Ù„:

class NumberBooking(StatesGroup):
    waiting_for_service = State()
    waiting_for_country = State()
    # Ø¥Ø¶Ø§ÙØ© Ø­Ø§Ù„Ø§Øª Ø£Ø®Ø±Ù‰ Ù„Ù„Ø­Ø¬Ø² Ø­Ø³Ø¨ Ø§Ù„Ø­Ø§Ø¬Ø©

Ø«Ù… Ø¨Ø¹Ø¯ Ø¶ØºØ· Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ø¹Ù„Ù‰ "Ø£Ø±Ù‚Ø§Ù…"ØŒ Ø§Ø¶Ø¨Ø· Ø§Ù„Ø­Ø§Ù„Ø© Ø¹Ù„Ù‰ NumberBooking.waiting_for_service. ÙÙŠ ÙƒÙ„ Ø®Ø·ÙˆØ©ØŒ Ù‚Ø¯Ù… Ù„ÙˆØ­Ø© Ù…ÙØ§ØªÙŠØ­ Ù…Ø·Ø§Ø¨Ù‚Ø© (Ù…Ø«Ù„Ø§Ù‹ Ø§Ø®ØªÙŠØ§Ø± Ù†ÙˆØ¹ Ø§Ù„Ø®Ø¯Ù…Ø© Ø£Ùˆ Ø§Ù„Ø¯ÙˆÙ„Ø©)ØŒ Ø«Ù… Ø§Ø³ØªØ®Ø¯Ù… await state.set_state(...) Ù„Ù„Ø§Ù†ØªÙ‚Ø§Ù„ Ø¥Ù„Ù‰ Ø§Ù„Ø­Ø§Ù„Ø© Ø§Ù„ØªØ§Ù„ÙŠØ©.

Ø¨Ø§Ù„Ù†Ø³Ø¨Ø© Ù„Ù„Ø²Ø± Ø¬ÙŠÙ…ÙŠÙ„ Ù…Ø¤Ù‚ØªØŒ ÙÙ‚Ø· Ù‚Ù… Ø¨Ø§Ù„Ø±Ø¯ Ø¨Ø±Ø³Ø§Ù„Ø© "Ù‚Ø±ÙŠØ¨Ù‹Ø§ âœ¨". Ø¹Ù„Ù‰ Ø³Ø¨ÙŠÙ„ Ø§Ù„Ù…Ø«Ø§Ù„:

@router.callback_query(F.data == "services_gmail")
async def temp_gmail(callback: CallbackQuery):
    await callback.message.answer("Ù‚Ø±ÙŠØ¨Ù‹Ø§ âœ¨")
    await callback.answer()


Ù‚Ø³Ù… Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª (âš™ï¸ Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª)

Ø¶Ù…Ù† Ø§Ù„Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª (âš™ï¸)ØŒ Ø£Ø¶Ù Ø²Ø± "Ø§Ù„Ø±ØµÙŠØ¯ ÙˆØ³Ø¬Ù„ Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø§Øª (ğŸ’°)" Ù…Ø¹ callback_data="settings_balance".

Ø¹Ù†Ø¯ Ø§Ù„Ù†Ù‚Ø± Ø¹Ù„ÙŠÙ‡ØŒ ÙŠØ¬Ø¨ Ø¹Ù„Ù‰ Ø§Ù„Ø¨ÙˆØª Ø§Ø³ØªØ±Ø¬Ø§Ø¹ Ø§Ù„Ø±ØµÙŠØ¯ Ø§Ù„Ø­Ø§Ù„ÙŠ Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙˆØ¢Ø®Ø± Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø§Øª Ø§Ù„Ù…Ø§Ù„ÙŠØ© Ù…Ù† Ø¬Ø¯ÙˆÙ„ transactions ÙÙŠ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª. Ø«Ù… Ø£Ø±Ø³Ù„ Ø±Ø³Ø§Ù„Ø© Ù…Ù†Ø³Ù‚Ø© ØªØªØ¶Ù…Ù† Ø§Ù„Ø±ØµÙŠØ¯ ÙˆØ§Ù„ØµÙÙ‚Ø§Øª Ø§Ù„Ø£Ø®ÙŠØ±Ø©.

Ù…Ø«Ø§Ù„ Ø¹Ù„Ù‰ Ù…Ø¹Ø§Ù„Ø¬:

@router.callback_query(F.data == "settings_balance")
async def show_balance(callback: CallbackQuery):
    balance = get_user_balance(user_id)        # Ø¯Ø§Ù„Ø© ÙˆÙ‡Ù…ÙŠØ© Ù„Ø§Ø³ØªØ±Ø¬Ø§Ø¹ Ø§Ù„Ø±ØµÙŠØ¯
    transactions = get_recent_transactions(user_id)  # Ø§Ø³ØªØ¹Ù„Ø§Ù… Ø¹Ù† Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø§Øª
    text = f"Ø±ØµÙŠØ¯Ùƒ Ø§Ù„Ø­Ø§Ù„ÙŠ: {balance}\nØ¢Ø®Ø± Ø§Ù„Ù…Ø¹Ø§Ù…Ù„Ø§Øª:\n..."
    await callback.message.answer(text)
    await callback.answer()

ØªØ£ÙƒØ¯ Ù…Ù† ØªÙ†ÙÙŠØ° Ø§Ø³ØªØ¹Ù„Ø§Ù…Ø§Øª Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¨Ø´ÙƒÙ„ ØµØ­ÙŠØ­ ÙˆØ¹Ø±Ø¶ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¨ÙˆØ¶ÙˆØ­.


Ù‚Ø³Ù… Ø¥Ø­ØµØ§Ø¦ÙŠØªÙŠ (ğŸ“Š Ø¥Ø­ØµØ§Ø¦ÙŠØªÙŠ)

Ø¹Ù†Ø¯ Ø§Ù„Ù†Ù‚Ø± Ø¹Ù„Ù‰ "Ø¥Ø­ØµØ§Ø¦ÙŠØªÙŠ (ğŸ“Š)"ØŒ Ø§Ø¹Ø±Ø¶ Ø±Ø³Ø§Ù„Ø© ØªØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„ØªØ§Ù„ÙŠØ© Ø¹Ù† Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…:

Ø§Ù„Ø±ØµÙŠØ¯ Ø§Ù„Ø­Ø§Ù„ÙŠ.

Ø¹Ø¯Ø¯ Ø§Ù„Ø£Ø±Ù‚Ø§Ù… Ø§Ù„ØªÙŠ Ø­Ø¬Ø²Ù‡Ø§.

ØªØ§Ø±ÙŠØ® Ø¢Ø®Ø± Ù…ÙƒØ§ÙØ£Ø© Ø£Ùˆ Ù†Ù‚Ø·Ø© Ø­ØµÙ„ Ø¹Ù„ÙŠÙ‡Ø§.

ØªØ§Ø±ÙŠØ® Ø§Ù†Ø¶Ù…Ø§Ù… Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… (Ø£Ùˆ ØªØ§Ø±ÙŠØ® Ø§Ù„ØªØ³Ø¬ÙŠÙ„ Ø£ÙˆÙ„ Ù…Ø±Ø©).


Ø§Ø³ØªØ®Ø±Ø¬ Ù‡Ø°Ù‡ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ù…Ù† Ø³Ø¬Ù„ Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙÙŠ Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª. ÙˆØ§Ø·Ø±Ø­Ù‡Ø§ Ø¨Ø±Ø³Ø§Ù„Ø© Ù†ØµÙŠØ© Ù…Ø±ØªØ¨Ø©ØŒ Ø¹Ù„Ù‰ Ø³Ø¨ÙŠÙ„ Ø§Ù„Ù…Ø«Ø§Ù„:

Ø§Ù„Ø±ØµÙŠØ¯: X Ù†Ù‚Ø·Ø©
Ø§Ù„Ø£Ø±Ù‚Ø§Ù… Ø§Ù„Ù…Ø­Ø¬ÙˆØ²Ø©: Y
Ø¢Ø®Ø± Ù…ÙƒØ§ÙØ£Ø©: YYYY-MM-DD
Ø§Ù†Ø¶Ù… ÙÙŠ: YYYY-MM-DD


Ù‚Ø³Ù… Ù†Ù‚Ø§Ø· Ù…Ø¬Ø§Ù†ÙŠØ© (ğŸ Ù†Ù‚Ø§Ø· Ù…Ø¬Ø§Ù†ÙŠØ©)

Ø¶Ù…Ù† Ù†Ù‚Ø§Ø· Ù…Ø¬Ø§Ù†ÙŠØ© (ğŸ)ØŒ Ø§Ø¹Ø±Ø¶ Ù‚Ø§Ø¦Ù…Ø© Ø¨Ù‚Ù†ÙˆØ§Øª Ø§Ù„Ø¨ÙˆØª (Ø¥Ù† ÙˆÙØ¬Ø¯Øª) ÙˆØ£Ø¶Ù Ø²Ø± "âœ… ØªØ­Ù‚Ù‚" Ù…Ø¹ callback_data="free_verify".

Ø¹Ù†Ø¯ Ø§Ù„Ù†Ù‚Ø± Ø¹Ù„Ù‰ "ØªØ­Ù‚Ù‚ (âœ…)"ØŒ ØªØ­Ù‚Ù‚ Ù…Ù…Ø§ Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù…Ø´ØªØ±ÙƒØ§Ù‹ ÙÙŠ Ø¬Ù…ÙŠØ¹ Ù‡Ø°Ù‡ Ø§Ù„Ù‚Ù†ÙˆØ§Øª Ø¹Ø¨Ø± await bot.get_chat_member(channel_id, user_id) Ø£Ùˆ Ø¹Ù† Ø·Ø±ÙŠÙ‚ ÙÙ„ØªØ± Ù…Ø®ØµØµ. Ø¥Ø°Ø§ ÙƒØ§Ù† Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… Ù…Ø´ØªØ±ÙƒØ§Ù‹ ÙÙŠ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù‚Ù†ÙˆØ§Øª Ø§Ù„Ù…Ø·Ù„ÙˆØ¨Ø©ØŒ Ù‚Ù… Ø¨Ø²ÙŠØ§Ø¯Ø© Ù†Ù‚Ø§Ø·Ù‡ (ØªØ­Ø¯ÙŠØ« Ø§Ù„Ø±ØµÙŠØ¯) ÙˆØ£Ø±Ø³Ù„ Ø±Ø³Ø§Ù„Ø© ØªØ£ÙƒÙŠØ¯. Ø£Ù…Ø§ Ø¥Ø°Ø§ ÙƒØ§Ù† Ù‡Ù†Ø§Ùƒ Ù‚Ù†ÙˆØ§Øª Ù„Ù… ÙŠØ´ØªØ±Ùƒ Ø¨Ù‡Ø§ Ø¨Ø¹Ø¯ØŒ ÙØ§Ø®Ø¨Ø±Ù‡ Ø¨Ø°Ù„Ùƒ.

Ù…Ø«Ø§Ù„ Ø¹Ù„Ù‰ Ù…Ø¹Ø§Ù„Ø¬:

@router.callback_query(F.data == "free_verify")
async def verify_channels(callback: CallbackQuery):
    all_subscribed = True
    for channel_id in channel_list:
        member = await bot.get_chat_member(channel_id, callback.from_user.id)
        if member.status == "left":
            all_subscribed = False
            break
    if all_subscribed:
        add_points_to_user(callback.from_user.id)  # Ù…Ù†Ø·Ù‚ Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù†Ù‚Ø§Ø·
        await callback.answer("ØªÙ… Ø§Ù„ØªØ­Ù‚Ù‚! ØªÙ… Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù†Ù‚Ø§Ø·.", show_alert=True)
    else:
        await callback.answer("ÙŠØ±Ø¬Ù‰ Ø§Ù„Ø§Ø´ØªØ±Ø§Ùƒ ÙÙŠ Ø¬Ù…ÙŠØ¹ Ø§Ù„Ù‚Ù†ÙˆØ§Øª Ù„Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ù„Ù†Ù‚Ø§Ø·.", show_alert=True)


Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø¹Ø§Ù…Ø©

Ø§Ø³ØªØ®Ø¯Ù… InlineKeyboardMarkup Ù…Ø¹ InlineKeyboardButton Ù„Ø¨Ù†Ø§Ø¡ Ù‚ÙˆØ§Ø¦Ù… Ø§Ù„Ø£Ø²Ø±Ø§Ø±. Ø­Ø¯Ø¯ callback_data Ù„ÙƒÙ„ Ø²Ø± Ø¨Ø´ÙƒÙ„ ÙˆØ§Ø¶Ø­ ÙˆÙ…Ù…ÙŠØ².

Ù†Ø¸Ù‘Ù… ØµÙŠØ§ØºØ© callback_data (Ù…Ø«Ù„Ø§Ù‹ "Ø§Ù„Ù‚Ø³Ù…:Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡" Ù…Ø«Ù„ "main:services", "settings:balance") Ù„ØªØ³Ù‡ÙŠÙ„ ÙÙ„ØªØ±Ø© Ø§Ù„Ø·Ù„Ø¨Ø§Øª.

Ø§Ø³ØªØ®Ø¯Ù… Ø­Ø§Ù„Ø§Øª FSM (StatesGroup Ùˆ State) Ù„Ù„ØªØ¹Ø§Ù…Ù„ Ù…Ø¹ Ø§Ù„Ø¹Ù…Ù„ÙŠØ§Øª Ù…ØªØ¹Ø¯Ø¯Ø© Ø§Ù„Ø®Ø·ÙˆØ§Øª Ù…Ø«Ù„ Ø­Ø¬Ø² Ø±Ù‚Ù…. Ø¹Ù„Ù‰ Ø³Ø¨ÙŠÙ„ Ø§Ù„Ù…Ø«Ø§Ù„ØŒ Ø¨Ø¹Ø¯ Ø¶ØºØ· Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù… "Ø£Ø±Ù‚Ø§Ù…"ØŒ Ø¶Ø¹ Ø§Ù„Ø­Ø§Ù„Ø© Ø¥Ù„Ù‰ NumberBooking.waiting_for_service Ø«Ù… Ø§Ù†ØªÙ‚Ù„ ÙÙŠ Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬ Ø§Ù„ØªØ§Ù„ÙŠ Ø¥Ù„Ù‰ NumberBooking.waiting_for_countryØŒ ÙˆÙ‡ÙƒØ°Ø§.

Ø£Ø¶Ù Ù…Ø¹Ø§Ù„Ø¬Ø§Øª Ù…Ù†ÙØµÙ„Ø© Ù„ÙƒÙ„ Ø²Ø± Ø£Ùˆ Ø£ÙƒØ´Ù† Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø¯ÙŠÙƒÙˆØ±Ø§ØªÙˆØ± Ø§Ù„Ù…Ù†Ø§Ø³Ø¨ (@router.callback_query Ø£Ùˆ @router.message). ÙˆØªØ°ÙƒÙ‘ÙØ± Ø§Ø³ØªØ¯Ø¹Ø§Ø¡ await callback.answer() ÙÙŠ Ù…Ø¹Ø§Ù„Ø¬Ø§Øª Ø§Ù„Ù€ callback Ù„Ø¥Ø²Ø§Ù„Ø© Ø±Ù…Ø² Ø§Ù„ØªØ­Ù…ÙŠÙ„ (Ø§Ù„ØªØ¯ÙˆÙŠØ±).

Ù…Ø¹ Ø§ÙƒØªÙ…Ø§Ù„ Ù‡Ø°Ù‡ Ø§Ù„Ù‡ÙŠÙƒÙ„ÙŠØ© ÙˆØ§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø§ØªØŒ Ø³ØªØ­ØµÙ„ Ø¹Ù„Ù‰ ÙˆØ§Ø¬Ù‡Ø© Ù…Ø³ØªØ®Ø¯Ù… ØªÙØ§Ø¹Ù„ÙŠØ© ÙƒØ§Ù…Ù„Ø©. Ø£Ø¶Ù ØªÙØ§ØµÙŠÙ„ Ù…Ù†Ø·Ù‚ÙŠØ© Ø¥Ø¶Ø§ÙÙŠØ© Ø¨Ø­Ø³Ø¨ Ø§Ù„Ø­Ø§Ø¬Ø© (Ù…Ø«Ù„ Ø§Ø³ØªØ¹Ù„Ø§Ù…Ø§Øª Ù‚Ø§Ø¹Ø¯Ø© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙˆØªØ­Ø¯ÙŠØ«Ø§Øª Ø§Ù„Ø±ØµÙŠØ¯).


Ø§Ù„Ù…ØµØ§Ø¯Ø±: ØªÙ… Ø§Ø³ØªØ®Ø¯Ø§Ù… ØªÙˆØ«ÙŠÙ‚ aiogram ÙˆØ£Ù…Ø«Ù„Ø© ØªØ¹Ù„ÙŠÙ…ÙŠØ© Ø­ÙˆÙ„ InlineKeyboardMarkup ÙˆFSM ÙÙŠ aiogram Ù„ØªÙˆØ¶ÙŠØ­ ÙƒÙŠÙÙŠØ© Ø¨Ù†Ø§Ø¡ Ø§Ù„Ù„ÙˆØ­Ø§Øª ÙˆØ§Ù„Ù‚ÙˆØ§Ø¦Ù…ØŒ ÙˆÙƒØ°Ù„Ùƒ Ù…Ø«Ø§Ù„ Ø¹Ù„Ù‰ ÙÙ„Ø§ØªØ± Ù…Ø®ØµØµØ© Ù„Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø£Ø¯Ù…Ù†.

Ø¹Ø§ÙŠØ²Ùƒ ØªØ±Ø¨Ø·Ù‡Ø§ Ø¨ÙŠ Ø³ÙˆØ¨Ø§ Ø¨ÙŠØ³ 
Ø¯Ø§ Ø§Ù„Ù…Ø¹Ù„ÙˆÙ…Ø§Øª 

https://junrioolwdbyzlvvtxsq.supabase.co



eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imp1bnJpb29sd2RieXpsdnZ0eHNxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTc0MzM5ODMsImV4cCI6MjA3MzAwOTk4M30.uMwb7wyvIy740WTjps-n7bCoKFk5f_7hoX4EpmOzIxI

Ø²Ø¨Ø· Ø§Ù„Ø¬Ø¯ÙˆØ§Ù„ Ø§Ù„Ù‚Ø¯Ù…Ø© ÙÙŠ Ø§Ù„Ø¯Ø§ØªØ§ Ø¨ÙŠØ³ Ø§Ù„Ø¬Ø¯ÙŠØ¯Ø© 
